<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pomodoro Timer</title>
  
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="pomodoroApp">
  <div class="tabs">
    <button class="tab pomodoro active" onclick="switchMode('pomodoro')">𝐏𝐨𝐦𝐨𝐝𝐨𝐫𝐨</button>
    <button class="tab short" onclick="switchMode('short')">𝐒𝐡𝐨𝐫𝐭 𝐁𝐫𝐞𝐚𝐤</button>
    <button class="tab long" onclick="switchMode('long')">𝐋𝐨𝐧𝐠 𝐁𝐫𝐞𝐚𝐤</button>
  </div>

  <div class="tracker-stats-container">
    <div id="heartTracker"></div>
    <button id="totalButton" onclick="openStatsPopup()" class="btn total-button">𝐓𝐨𝐭𝐚𝐥  0★</button>
  </div>

  <div id="timer">00:00</div>

  <div class="button-container">
    <div class="button-group">
      <button id="startBtn" class="btn" onclick="toggleTimer()">𝚂𝚃𝙰𝚁𝚃</button>
      <button class="btn" onclick="resetTimer()">𝚁𝙴𝚂𝙴𝚃</button>
      <button class="btn" onclick="toggleOptions()">໒꒱ ‧₊˚</button>
    </div>
    <button id="themeToggleButton" class="theme-toggle-btn" onclick="toggleTheme()">🖤</button>
  </div>
</div>

  <!-- 통계 팝업 버튼 및 팝업 -->
  <div class="stats-popup-overlay" id="statsPopupOverlay" style="display: none;">
    <div class="stats-popup">
      <h2 class="popup-title">📊 𝐓𝐨𝐝𝐚𝐲'𝐬</h2>
      <p id="todayFocusCount">집중 횟수 0회</p>
      <p id="todayFocusTime">집중 시간 0시간 0분</p>
  
      <h2 class="popup-title">📅 𝐓𝐡𝐢𝐬 𝐦𝐨𝐧𝐭𝐡'𝐬</h2>
      <p id="monthFocusCount">집중 횟수 0회</p>
      <p id="monthFocusTime">집중 시간 0시간 0분</p>
  
      <p class="popup-note">* 통계는 1달마다 초기화됩니다.</p>
  
      <div class="popup-buttons">
        <button class="btn close-btn" onclick="closeStatsPopup()">닫기</button>
        <button class="btn download-btn" onclick="downloadStatsAsExcel()">다운로드</button>
      </div>
    </div>
  </div>

<!-- 메시지 창 -->
  <div id="messageBox" class="message-box" style="display: none;">
    <div id="messageText"></div>
    <button onclick="closeMessageBox()">닫기</button>
  </div>


<!-- 옵션 패널 -->
<div id="optionsPanel" style="margin-top: 20px; width: 100%; max-width: 400px;">
  <button class="section-button" onclick="toggleSection('timeSettings')">타이머 설정</button>
  <div id="timeSettings" class="section-content">
    <div class="option-group">
      <label for="pomodoroTime">Pomodoro 시간 (분):</label>
      <input type="number" id="pomodoroTime" value="25">
    </div>
    <div class="option-group">
      <label for="shortTime">짧은 휴식 (분):</label>
      <input type="number" id="shortTime" value="5">
    </div>
    <div class="option-group">
      <label for="longTime">긴 휴식 (분):</label>
      <input type="number" id="longTime" value="15">
    </div>
    <div class="option-group" style="display: flex; align-items: center; justify-content: space-between;">
      <label for="autoRepeatToggle" style="margin-right: 10px;">집중 모드 (자동 반복)</label>
      <label class="switch">
        <input type="checkbox" id="autoRepeatToggle">
        <span class="slider round"></span>
      </label>
    </div>
  </div>

  <button class="section-button" onclick="toggleSection('colorSettings')">색상 설정</button>
  <div id="colorSettings" class="section-content">
    <div class="option-group">
      <label for="bgColor">배경 색상:</label>
      <input type="color" id="bgColor" value="#f0f0f0">
    </div>
    <div class="option-group">
      <label for="btnColor">버튼 색상:</label>
      <input type="color" id="btnColor" value="#4CAF50">
    </div>
    <div class="option-group">
      <label for="btnHoverColor">버튼 호버 색상:</label>
      <input type="color" id="btnHoverColor" value="#45a049">
    </div>
    <div class="option-group">
      <label for="highlightColor">버튼 강조 색상:</label>
      <input type="color" id="highlightColor" value="#ff9800">
    </div>
    <div class="option-group">
      <label for="btnTextColor">버튼 텍스트 색상:</label>
      <input type="color" id="btnTextColor" value="#ffffff">
    </div>
    <div class="option-group">
      <label for="timerColor">타이머 숫자 색상:</label>
      <input type="color" id="timerColor" value="#000000">
    </div>
  </div>

    <!-- 새로 추가할 프리셋 탭 버튼 -->
    <button class="section-button" onclick="toggleSection('presetSettings')">프리셋 선택</button>

    <!-- 프리셋 설정 부분 -->
    <div id="presetSettings" class="section-content">
      <div class="option-group"> 
        <ul id="presetList" class="preset-list">
          <li data-preset="pink" onclick="applyPreset('pink')">🩷𝑃𝑖𝑛𝑘🩷</li>
          <li data-preset="blue" onclick="applyPreset('blue')">🩵𝐵𝑙𝑢𝑒🩵</li>
          <li data-preset="yellow" onclick="applyPreset('yellow')">💛𝑌𝑒𝑙𝑙𝑜𝑤💛</li>
          <li data-preset="green" onclick="applyPreset('green')">💚𝐺𝑟𝑒𝑒𝑛💚</li>
          <li data-preset="black" onclick="applyPreset('black')">🖤𝐵𝑙𝑎𝑐𝑘🖤</li>
          <li data-preset="white" onclick="applyPreset('white')">🤍𝑊ℎ𝑖𝑡𝑒🤍</li>
          <li data-preset="pinkchoco" onclick="applyPreset('pinkchoco')">🩷𝑃𝐼𝑛𝑘𝐶ℎ𝑜𝑐𝑜🍫</li>
          <li data-preset="tomato" onclick="applyPreset('tomato')">🍅𝑇𝑜𝑚𝑎𝑡𝑜🍅</li>
          <li data-preset="angel" onclick="applyPreset('angel')">🪽𝐴𝑛𝑔𝑒𝑙🪽</li>
        </ul>
      </div> 
    </div>

  <button class="section-button" onclick="toggleSection('textSettings')">텍스트 설정</button>
  <div id="textSettings" class="section-content">
    <div class="option-group">
      <label for="btnFontSize">버튼 텍스트 크기 (px):</label>
      <input type="number" id="btnFontSize" value="16" min="5" max="80">
    </div>
    <div class="option-group">
      <label for="timerFontSize">타이머 숫자 크기 (px):</label>
      <input type="number" id="timerFontSize" value="48" min="10" max="200">
    </div>
    <div class="option-group">
      <label for="workDoneMessage">작업 완료 메시지 (30자):</label>
      <textarea id="workDoneMessage" rows="2" maxlength="30"></textarea>
    </div>
    <div class="option-group">
      <label for="breakDoneMessage">휴식 완료 메시지 (30자):</label>
      <textarea id="breakDoneMessage" rows="2" maxlength="30"></textarea>
    </div>
  </div>

  <!-- 볼륨 조절 슬라이더 -->
  <button class="section-button" onclick="toggleSection('soundSettings')">사운드 설정</button>
  <div id="soundSettings" class="section-content">
    <div class="option-group">
      <label for="volumeControl">볼륨:</label>
      <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1">
    </div>
  </div>

  <!-- 다크/라이트 테마 설정 -->
<button class="section-button" onclick="toggleSection('themeSettings')">테마 설정</button>
<div id="themeSettings" class="section-content">
  <div class="option-group center-align" style="gap:5px;">
    <button class="btn fixed-font" onclick="setTheme('dark')">🖤𝐃𝐚𝐫𝐤🖤</button>
    <button class="btn fixed-font" onclick="setTheme('light')">🤍𝐋𝐢𝐠𝐡𝐭🤍</button>
    <button class="btn fixed-font" onclick="setTheme('system')">🖥️𝐒𝐲𝐬𝐭𝐞𝐦🖥️</button>
  </div>
</div>

  <div class="apply-btn-wrapper">
    <button class="btn" onclick="applyOptions()">적용</button>
    <button class="btn" onclick="toggleOptions()">닫기</button>
  </div>
</div>

<!-- 알람 사운드 (반복재생) -->
<audio id="alarmSound" loop>
  <source src="https://raw.githubusercontent.com/chasw930/Pomodoro-Timer/main/prod.chibi_kiss.mp3" type="audio/mpeg">
  </audio>

<script defer src="script.js"></script>

</body>
</html>